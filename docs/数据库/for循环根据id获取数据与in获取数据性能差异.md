## 代码如下

```java
@Get("get_exam_result")
    public String testGetDataFromDB(@Param("limit") int limit){
        List<Integer> ids = examResultsDAO.getIds(limit);
      
      	// for循环获取值
        long time1 = System.currentTimeMillis();
        List<ExamResultsModel> examResultsModels = new ArrayList<>();
        for (Integer id : ids) {
            // 对应sql：@SQL("SELECT" + SELECT_COLUMNS + "FROM" + TABLE_NAME + "WHERE id = :id AND status <> -1 LIMIT 1")
            ExamResultsModel result = examResultsDAO.getExamResultsById(id);
            examResultsModels.add(result);
        }
        long time2 = System.currentTimeMillis();
        String result = (time2 - time1) / 1 + "ms";
      
      	// in 查询一次性获取值
        // 对应sql：@SQL("SELECT" + SELECT_COLUMNS + "FROM" + TABLE_NAME + "WHERE id IN (:1) AND status <> -1")
        // List<ExamResultsModel> examResulsModels1 = examResultsDAO.getExamResultListById(ids);
        // long time3 = System.currentTimeMillis();
        // String result = (time3 - time2) / 1 + "ms";

        return "@" + result;
    }
```



## 用postman模拟100个请求，分别执行的结果报告如下

分别注释掉对应代码进行测试，结果摘要如下：

| 性能指标                     | for循环by id查询值 | **in 查询一次性获取值** |
| ---------------------------- | ------------------ | ----------------------- |
| totalTime                    | 112468             | 11550                   |
| 平均一个请求耗时（单位：秒） | 1.12               | 0.12                    |

### 完整的性能报告如下：

- for循环by id查询值：

  ```json
  {
  	"id": "5c85c004-9550-45a4-ad28-48e1cb84d86f",
  	"name": "test_get_db",
  	"allTests": [],
  	"timestamp": "2019-08-06T07:19:28.778Z",
  	"collection_id": "e5c14553-db46-4caa-a808-0264a7e381f1",
  	"folder_id": 0,
  	"target_type": "collection",
  	"environment_id": "0",
  	"data": [],
  	"delay": 0,
  	"count": 100,
  	"collection": {
  		"id": "e5c14553-db46-4caa-a808-0264a7e381f1",
  		"name": "test_get_db",
  		"description": null,
  		"auth": null,
  		"events": null,
  		"variables": null,
  		"order": [
  			"0cb6dcc6-740c-4b80-906b-dbf223883aba"
  		],
  		"folders_order": [],
  		"owner": "3426463",
  		"permissions": {},
  		"favorite": false,
  		"shared": false,
  		"type": "collection",
  		"depth": 0
  	},
  	"folder": null,
  	"environment": null,
  	"globals": [],
  	"results": [
  		{
  			"name": "http://localhost:8080/test/get_exam_result?limit=100",
  			"id": "0cb6dcc6-740c-4b80-906b-dbf223883aba",
  			"totalTime": 0,
  			"responseCode": {
  				"code": 200,
  				"name": "OK",
  				"detail": {
  					"name": "OK",
  					"detail": "Standard response for successful HTTP requests. The actual response will depend on the request method used. In a GET request, the response will contain an entity corresponding to the requested resource. In a POST request the response will contain an entity describing or containing the result of the action."
  				}
  			},
  			"tests": {},
  			"testPassFailCounts": {},
  			"times": [
  				"1028",
  				"1046",
  				"963",
  				"1075",
  				"954",
  				"1023",
  				"1390",
  				"1087",
  				"1069",
  				"928",
  				"1050",
  				"938",
  				"935",
  				"923",
  				"915",
  				"947",
  				"1269",
  				"962",
  				"967",
  				"1029",
  				"894",
  				"992",
  				"960",
  				"900",
  				"913",
  				"928",
  				"1377",
  				"927",
  				"924",
  				"902",
  				"921",
  				"1045",
  				"10234",
  				"5736",
  				"1011",
  				"908",
  				"960",
  				"901",
  				"1241",
  				"1009",
  				"962",
  				"901",
  				"893",
  				"1000",
  				"951",
  				"928",
  				"928",
  				"914",
  				"955",
  				"1080",
  				"953",
  				"889",
  				"932",
  				"932",
  				"1032",
  				"959",
  				"961",
  				"935",
  				"947",
  				"1170",
  				"967",
  				"928",
  				"917",
  				"942",
  				"910",
  				"1116",
  				"1210",
  				"934",
  				"937",
  				"915",
  				"1092",
  				"1095",
  				"1244",
  				"1047",
  				"1079",
  				"938",
  				"950",
  				"936",
  				"988",
  				"937",
  				"914",
  				"928",
  				"926",
  				"942",
  				"953",
  				"995",
  				"898",
  				"922",
  				"1065",
  				"899",
  				"1035",
  				"973",
  				"936",
  				"933",
  				"938",
  				"1008",
  				"917",
  				"950",
  				"926",
  				"925"
  			],
  			"allTests": [
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{}
  			],
  			"time": "925",
  			"totalRequestTime": 112468,
  			"iterationResults": {}
  		}
  	],
  	"totalPass": 0,
  	"totalFail": 0,
  	"totalTime": 112468,
  	"lifecycle": "done",
  	"requests": [
  		{
  			"name": "http://localhost:8080/test/get_exam_result?limit=100",
  			"id": "0cb6dcc6-740c-4b80-906b-dbf223883aba",
  			"url": "http://localhost:8080/test/get_exam_result?limit=100",
  			"time": "925",
  			"responseCode": {
  				"code": 200,
  				"name": "OK",
  				"detail": {
  					"name": "OK",
  					"detail": "Standard response for successful HTTP requests. The actual response will depend on the request method used. In a GET request, the response will contain an entity corresponding to the requested resource. In a POST request the response will contain an entity describing or containing the result of the action."
  				}
  			},
  			"testPassFailCounts": {}
  		}
  	],
  	"synced": false
  }
  ```

  

- in 查询一次性获取值

  ```json
  {
  	"id": "befb4cee-803b-4102-8164-a85c338eedc8",
  	"name": "test_get_db",
  	"allTests": [],
  	"timestamp": "2019-08-06T07:26:01.177Z",
  	"collection_id": "e5c14553-db46-4caa-a808-0264a7e381f1",
  	"folder_id": 0,
  	"target_type": "collection",
  	"environment_id": "0",
  	"data": [],
  	"delay": 0,
  	"count": 100,
  	"collection": {
  		"id": "e5c14553-db46-4caa-a808-0264a7e381f1",
  		"name": "test_get_db",
  		"description": null,
  		"auth": null,
  		"events": null,
  		"variables": null,
  		"order": [
  			"0cb6dcc6-740c-4b80-906b-dbf223883aba"
  		],
  		"folders_order": [],
  		"owner": "3426463",
  		"permissions": {},
  		"favorite": false,
  		"shared": false,
  		"type": "collection",
  		"depth": 0
  	},
  	"folder": null,
  	"environment": null,
  	"globals": [],
  	"results": [
  		{
  			"name": "http://localhost:8080/test/get_exam_result?limit=100",
  			"id": "0cb6dcc6-740c-4b80-906b-dbf223883aba",
  			"totalTime": 0,
  			"responseCode": {
  				"code": 200,
  				"name": "OK",
  				"detail": {
  					"name": "OK",
  					"detail": "Standard response for successful HTTP requests. The actual response will depend on the request method used. In a GET request, the response will contain an entity corresponding to the requested resource. In a POST request the response will contain an entity describing or containing the result of the action."
  				}
  			},
  			"tests": {},
  			"testPassFailCounts": {},
  			"times": [
  				"39",
  				"24",
  				"20",
  				"38",
  				"24",
  				"22",
  				"20",
  				"23",
  				"24",
  				"22",
  				"22",
  				"24",
  				"24",
  				"21",
  				"23",
  				"21",
  				"22",
  				"23",
  				"26",
  				"26",
  				"33",
  				"30",
  				"25",
  				"25",
  				"1700",
  				"36",
  				"30",
  				"23",
  				"30",
  				"24",
  				"23",
  				"26",
  				"30",
  				"51",
  				"28",
  				"25",
  				"24",
  				"23",
  				"22",
  				"25",
  				"23",
  				"23",
  				"20",
  				"22",
  				"21",
  				"20",
  				"23",
  				"23",
  				"24",
  				"185",
  				"23",
  				"26",
  				"21",
  				"24",
  				"25",
  				"36",
  				"145",
  				"21",
  				"24",
  				"22",
  				"27",
  				"18",
  				"23",
  				"24",
  				"23",
  				"26",
  				"25",
  				"21",
  				"22",
  				"23",
  				"23",
  				"24",
  				"24",
  				"23",
  				"5132",
  				"36",
  				"37",
  				"26",
  				"36",
  				"26",
  				"23",
  				"20",
  				"25",
  				"29",
  				"22",
  				"25",
  				"23",
  				"21",
  				"23",
  				"56",
  				"26",
  				"25",
  				"28",
  				"26",
  				"21",
  				"28",
  				"69",
  				"24",
  				"21",
  				"1924"
  			],
  			"allTests": [
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{},
  				{}
  			],
  			"time": "1924",
  			"totalRequestTime": 11550,
  			"iterationResults": {}
  		}
  	],
  	"totalPass": 0,
  	"totalFail": 0,
  	"totalTime": 11550,
  	"lifecycle": "done",
  	"requests": [
  		{
  			"name": "http://localhost:8080/test/get_exam_result?limit=100",
  			"id": "0cb6dcc6-740c-4b80-906b-dbf223883aba",
  			"url": "http://localhost:8080/test/get_exam_result?limit=100",
  			"time": "1924",
  			"responseCode": {
  				"code": 200,
  				"name": "OK",
  				"detail": {
  					"name": "OK",
  					"detail": "Standard response for successful HTTP requests. The actual response will depend on the request method used. In a GET request, the response will contain an entity corresponding to the requested resource. In a POST request the response will contain an entity describing or containing the result of the action."
  				}
  			},
  			"testPassFailCounts": {}
  		}
  	],
  	"synced": false
  }
  ```

  

