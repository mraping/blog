> 一般调用一个JVM里的类或者方法，往往都是直接new出来对象然后调用，Dubbo的意义在于可以让我们去调用到在不同JVM中的方法，只通过new肯定无法做到，会提示我们找不到该类。

在我们不了解Dubbo的时候，我们可以通过如下办法达到我们的目的：

1. 将那个工程打成jar包，然后添加到另一个工程中

2. 复制粘贴要用到的类过去

3. Socket网络传输

## Socket网络传输
前面两种实现方法都是很简单的，第三个之前Java基础我们都学过java.net.socket。最简单的实现TCP BIO NIO就要用但是性能不是很好，而且Socket还遵循osi模型。从本质来讲Socket是应用层和传输层之间的一层API封装。

因此我们了解到可以用应用层的协议，也就是Http协议，更底层的也就是传输层协议，因为太底层了所以一般都进行封装成也Socket。

在使用Socket的时候，需要建立一个Client端，一个Server端。

Client端，我们一般会Socket(ip,port)，然后getIO()
Server端，我们一般会监听端口，ServerSocket(port)，然后接受请求，socket=server.accept()，与此同时getIO()；

但是也同样存在问题，假如需求是要传输一个class，进行传输的话对象被转化成二进制数之后是无法被直接被传输的，这时需要Serializable一下才行。

**结论**：利用Socket调用远端方法，需要一个序列化的过程，但是如果需要调用远端的API，并且启动多线程服务，这时需要写很多繁琐的代码，因此就可以使用到一个叫做RMI(Remote Method Invocation) 的，它可以帮助我们进行封装调用远程的方法。

### Socket的问题
Socket一个最严重的问题就是：假如客户端是C语言编写，服务端是Java语言，使用Socket进行网络传输肯定就不行，传输层协议不行的话就要使用http协议了，因为http协议是与语言无关的每一个语言都有相关的封装。

那么要如何操作才能解决这个问题呢？？？？
序列化然后再反序列化？肯定是不能成功的。。。

最后得到的解决方法就是：
将序列化的二进制字节流的格式转换成一种其他的格式

比如xml？
其实看一般网页的格式就知道了，XML是可以携带数据的，并且XML作为一种通用数据格式也是适合跨语言远程通讯的

将以XML为数据格式的http协议网络通信称之为： WebService

## WebService
既然已经选择了使用http+XML进行网络传输，现在就来分析一下。

首先，网络传输时可以的，但是传输内容呢？
如想传输的id是1，名字是2，那么格式就是：

```xml
<property name="id" value="1">
<property name="name" value="2">
```


显然这些看起来很臃肿，无用的信息比有用的信息还要多因此效率就降低了，所以XML这种格式看起来不是很适合。

Json比XML格式看起来好太多，因此最终的选择方案就是使用的http+Json进行远程调用。

**最终，将这种远程网络通信的行为，不论是Socket，WebService，http+Json，统称为RPC**

## RPC
上面已经知道，RPC不是一种框架，也不是架构，是一种远程网络通讯的思想，从而实现达到端到端的通信。

那么常见的实现RPC的几种方式有

- Dubbo
- Dubbox(当当网的Dubbo二次开发)
- Motan(新浪网的RPC框架)
- GRPC
- Thrift

> SpringCloud和Dubbo那些还是有些区别的，上面几种都是基于RPC的远程调用；而SpringCloud是基于http的Restful API。

### Dubbo
原来使用的是Socket进行一个暴力通信，而Dubbo更像是一个封装，不过肯定还是用一个调用请求的过程，除此之外还包括以下的功能：

1. 首先将服务端的ip注册维护到一个固定的模块
2. 然后客户端按照规则去找符合要求的ip
3. 将符合的ip反馈获取到
4. 通过Socket实现远程通讯
5. 将全程相关的操作记录到Monitor内部，方便修改错误，但是也不能只出错不预防，所以还是要有容错机制，可以是重新请求，继续等待等等，这些都是已经封装在了Dubbo内部。

那么Dubbo的功能是什么呢？？？
它是高性能、轻量级，基于Java RPC的框架。Dubbo提供了三个关键的功能：基于接口的远程连接，容错机制和负载均衡，服务注册和发现的自动化。

### Zookeeper辅助Dubbo完成监听
上面简单说了Dubbo的架构和作用，但如果实际实现的话，在注册ip的方面其实是有很多方法可以去实现的，比如单纯的map是可以实现的，但是有的时候ip是会失效宕机的，这就要再手动完成一个Monitor的程序这样做起来就会很麻烦，这里可以借助Zookeeper。。

Zookeeper是拥有**心跳机制**的，可以监听到这个节点是否还活着，所以就可以借助Zookeeper来完成监听
