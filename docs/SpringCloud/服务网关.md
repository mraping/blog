## 服务网关

服务网关是微服务架构中一个不可或缺的部分，API Gateway 是一个服务器，也可以说是进入系统的唯一节点。这跟面向对象设计模式中的 Facade 模式很像。API Gateway 封装内部系统的架构，并且提供 API 给各个客户端。它还可能有 其他功能，如授权、监控、负载均衡、缓存、请求分片和管理、静态响应处理等。

API Gateway 负责请求转发、合成和协议转换。所有来自客户端的请求都要先经过 API Gateway， 然后路由这些请求到对应的微服务。API Gateway 将经常通过调用多个微服务来处理一个请求以 及聚合多个服务的结果。它可以在 web 协议与内部使用的非 Web 友好型协议间进行转换，如 HTTP 协议、WebSocket 协议。 

- 请求转发 服务转发主要是对客户端的请求安装微服务的负载转发到不同的服务上 

- 响应合并 把业务上需要调用多个服务接口才能完成的工作合并成一次调用对外统一提供服务。 

- 协议转换 重点是支持 SOAP，JMS，Rest 间的协议转换。 

- 数据转换 重点是支持 XML 和 Json 之间的报文格式转换能力

## Zuul实现微服务网关
> 通过服务网关统一向外系统提供REST API的过程中，除了具备服务路由、均衡负载功能之外，它还具备了权限控制等功能。
> Spring Cloud Netflix中的Zuul就担任了这样的一个角色，为微服务架构提供了前门保护的作用，同时将权限控制这些较重的非业务逻辑内容迁移到
> 服务路由层面，使得服务集群主体能够具备更高的可复用性和可测试性。

### API Gateway需要考虑的核心能力
负载均衡，缓存，路由，访问控制，服务代理，监控，日志等
### API 网关还能为每个客户端提供一个定制的 API
通常情况下它会向客户端提供一个粗粒度的API，以产品详情的场景为例，API网关可以提供一个端点(/productdetails?productId=#),
使移动端可以通过一个请求获取到所有的产品详情。**API网关通过调用各个服务** (产品信息、推介、评论等)并合并结果来处理请求。

